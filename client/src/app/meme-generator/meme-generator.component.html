<div style="padding: 10px; width: 600px;" class="wrapper center" *ngIf="isLoggedIn;else notLoggedIn">
    <h2>Meme Generator</h2>
    <form name="generateMemeForm" [formGroup]="memeForm">
        <input matInput formControlName="_id" hidden>
        <div fxLayout="row" fxLayoutAlign="start start">
            <button (click)="hiddenFileInput.click()" mat-raised-button color="secondary">
                Upload image
            </button>
            <input
                #hiddenFileInput
                formControlName="file"
                id="file"
                type="file"
                class="form-control"
                style="display: none"
                (change)="onFileChange($event)">
        </div>
        <p>or</p>
        <div fxLayout="row" fxLayoutAlign="start start">
            <button (click)="loadTemplates()" mat-raised-button color="secondary">
                Load templates
            </button>
        </div>
        <div *ngIf="templates" id="templates">
            <img *ngFor="let template of templates" src="{{template}}" alt="template"
                 width="90" height="90" (click)="selectTemplate(template)"/>
        </div>
        <p>or</p>
        <div fxLayout="row" fxLayoutAlign="space-between center">
            <mat-form-field>
                <mat-label>Image URL</mat-label>
                <input matInput formControlName="imgUrl">
            </mat-form-field>
        </div>
        <div fxLayout="row" style="margin-top: 10px">
            <mat-form-field>
                <mat-label>Title</mat-label>
                <input matInput formControlName="title" required>
                <mat-error>Title is required!</mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Description</mat-label>
                <input matInput formControlName="description" required>
                <mat-error>Description is required!</mat-error>
            </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="space-between center">
            <mat-form-field>
                <mat-label>Top text</mat-label>
                <input matInput formControlName="topText" required>
                <mat-error>Top text is required!</mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Top x</mat-label>
                <input matInput formControlName="topX">
            </mat-form-field>
            <mat-form-field>
                <mat-label>Top y</mat-label>
                <input matInput formControlName="topY">
            </mat-form-field>
            <mat-checkbox formControlName="topBold">Bold</mat-checkbox>
            <mat-checkbox formControlName="topItalic">Italic</mat-checkbox>

            <mat-form-field color="white">
                <mat-label>Font size</mat-label>
                <input formControlName="topSize" matInput type="number" min="10">
            </mat-form-field>

            <input
                [value]="memeForm.get('topColor').value"
                [colorPicker]="memeForm.get('topColor').value"
                (colorPickerChange)="memeForm.get('topColor').setValue($event)"
                [style.background]="memeForm.get('topColor').value"
                class="colorPicker"
                formControlName="topColor">
        </div>

        <div fxLayout="row">
            <mat-form-field>
                <mat-label>Bottom text</mat-label>
                <input matInput formControlName="bottomText">
            </mat-form-field>
            <mat-form-field>
                <mat-label>Bottom x</mat-label>
                <input matInput formControlName="bottomX">
            </mat-form-field>
            <mat-form-field>
                <mat-label>Bottom y</mat-label>
                <input matInput formControlName="bottomY">
            </mat-form-field>
            <mat-checkbox formControlName="bottomBold">Bold</mat-checkbox>
            <mat-checkbox formControlName="bottomItalic">Italic</mat-checkbox>

            <mat-form-field color="white">
                <mat-label>Font size</mat-label>
                <input formControlName="bottomSize" matInput type="number" min="10">
            </mat-form-field>

            <input
                [value]="memeForm.get('bottomColor').value"
                [colorPicker]="memeForm.get('bottomColor').value"
                (colorPickerChange)="memeForm.get('bottomColor').setValue($event)"
                [style.background]="memeForm.get('bottomColor').value"

                class="colorPicker"
                formControlName="bottomColor">
        </div>

        <img *ngIf="meme" src="{{meme.url}}" alt="{{meme.title}}"/>

        <div fxLayout="row" style="margin-top: 10px">
            <button mat-raised-button color="accent" (click)="discardMeme()">
                Discard Meme
            </button>
        </div>
        <div fxLayout="row" style="margin-top: 10px">
            <button mat-raised-button color="primary" (click)="finishMeme()">
                Finish Meme
            </button>
        </div>
    </form>
</div>

<ng-template #notLoggedIn>
    <div class="wrapper center">
        <h3 class="text">Please sign in or create a account to create a meme!</h3>
    </div>
</ng-template>
